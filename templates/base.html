<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>{% block header_title %}Rahbar paneli{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        * {
            box-sizing: border-box;
        }
        body{
            margin:0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background:#0f172a; /* tashqi fon – monitor atrofidagi qoramtir */
            color:#111827;
        }
        .layout{
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:16px;
        }
        .shell{
            width:100%;
            max-width:1320px;
            height: 90vh;
            background:linear-gradient(145deg,#e5e7eb,#f3f4f6);
            border-radius:26px;
            box-shadow:0 32px 80px rgba(0,0,0,0.6);
            display:flex;
            overflow:hidden;
        }

        /* ===== SIDEBAR (chap tomondagi quyuq panel) ===== */
        .sidebar{
            width:230px;
            background:linear-gradient(180deg,#020617,#020617 30%,#020617);
            padding:18px 16px;
            color:#e5e7eb;
        }
        .sidebar-profile{
            display:flex;
            align-items:center;
            gap:10px;
            margin-bottom:24px;
        }
        .profile-avatar{
            width:40px;
            height:40px;
            border-radius:999px;
            background:#1f2937;
        }
        .profile-name{
            font-size:14px;
            font-weight:600;
        }
        .sidebar-menu{
            margin-top:12px;
        }
        .menu-title{
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:1px;
            margin-bottom:6px;
            opacity:0.5;
        }
        .menu-link{
            display:flex;
            align-items:center;
            gap:10px;
            padding:9px 10px;
            border-radius:10px;
            color:#e5e7eb;
            text-decoration:none;
            font-size:13px;
            margin-bottom:4px;
            transition:0.15s ease;
        }
        .menu-link span.icon{
            width:18px;
            height:18px;
            border-radius:6px;
            background:#0f172a;
        }
        .menu-link:hover{
            background:#111827;
        }
        .menu-link.active{
            background:linear-gradient(90deg,#2563eb,#22c55e);
            color:#f9fafb;
        }
        .menu-link.logout{
            margin-top:16px;
            color:#fca5a5;
        }

        /* ===== CONTENT ===== */
        .content{
            flex:1;
            padding:18px 20px;
            display:flex;
            flex-direction:column;
            overflow:auto;
        }
        .topbar{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:12px;
        }
        .topbar-title{
            font-size:18px;
            font-weight:700;
        }
        .topbar-actions{
            display:flex;
            align-items:center;
            gap:10px;
        }
        .topbar-pill{
            width:34px;
            height:34px;
            border-radius:999px;
            background:#e5e7eb;
        }

        /* Ichki kontent bloklari uchun umumiy klasslar –
           dashboard.html ichida ishlatamiz */
        .card-shell{
            background:#ffffff;
            border-radius:18px;
            padding:14px 16px;
            box-shadow:0 10px 28px rgba(15,23,42,0.12);
            border:1px solid #e5e7eb;
        }
    </style>

    {% block extra_head %}{% endblock %}
</head>
<body>

<div class="layout">
    <div class="shell">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-profile">
                <div class="profile-avatar"></div>
                <div>
                    <div class="profile-name">Rahbar</div>
                    <div style="font-size:11px;opacity:0.6;">AI Imperiya</div>
                </div>
            </div>

            <nav class="sidebar-menu">
                <div class="menu-title">Bo‘limlar</div>

                {% if session.get("user_role") == "admin" or session.get("user_role") == "manager" %}
                    <a class="menu-link active" href="{{ url_for('admin_dashboard') }}">
                        <span class="icon"></span> <span>Topshiriqlar</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('vehicle_list') }}">
                        <span class="icon"></span> <span>Avtotransportlar</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('organizations_list') }}">
                        <span class="icon"></span> <span>Tashkilotlar</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('outsourcing_list') }}">
                        <span class="icon"></span> <span>Outsorsing</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('solar_dashboard') }}">
                        <span class="icon"></span> <span>Solar</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('hr_list') }}">
                        <span class="icon"></span> <span>Xodimlar</span>
                    </a>
                {% elif session.get("user_role") == "employee" %}
                    <a class="menu-link active" href="{{ url_for('employee_dashboard') }}">
                        <span class="icon"></span> <span>Mening panelim</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('ijro_list') }}">
                        <span class="icon"></span> <span>Ijro topshiriqlar</span>
                    </a>
                    <a class="menu-link" href="{{ url_for('hr_profile', user_id=session.get('user_id')) }}">
                        <span class="icon"></span> <span>Profil</span>
                    </a>
                {% endif %}

                {% if session.get("user_id") %}
                    <a class="menu-link logout" href="{{ url_for('logout') }}">
                        <span class="icon"></span> <span>Chiqish</span>
                    </a>
                {% endif %}
            </nav>
        </aside>

        <!-- CONTENT -->
        <main class="content">
            <div class="topbar">
                <div class="topbar-title">
                    {% block page_title %}Rahbar paneli{% endblock %}
                </div>
                <div class="topbar-actions">
                    <div class="topbar-pill"></div>
                    <div class="topbar-pill"></div>
                </div>
            </div>

            {% block content %}{% endblock %}
        </main>

    </div>
</div>

</body>
</html>
